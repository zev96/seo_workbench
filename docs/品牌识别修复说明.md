# 品牌识别修复说明

## 修复内容

### 问题
之前使用"品牌核心词匹配"导致：
- 文章中写"小狗" → 匹配到"小狗T11 Pro"、"小狗T21 Pure"、"小狗T12"全部型号
- 文章中写"戴森" → 匹配到"戴森V8"、"戴森V10"、"戴森V12"、"戴森V15"全部型号

### 解决方案
改为**完整匹配**：
- 文章中写"小狗T12" → 只匹配"小狗T12"
- 文章中写"小狗T21 Pure" → 只匹配"小狗T21 Pure"
- 文章中只写"小狗" → 不匹配任何型号

## 使用说明

### 1. 数据库中的品牌名称要完整
在"数据库"界面添加品牌时，使用完整的品牌名称：
```
✓ CEWEY DS18
✓ 米家3C
✓ 小狗T11 Pro
✓ 小狗T21 Pure
✓ 戴森V8
✓ 戴森V10
```

### 2. 文章中也要写完整品牌名
在文章中提到品牌时，使用完整的品牌名称：

**正确示例：**
```
市面上常见的吸尘器品牌有CEWEY DS18、小狗T12、戴森V8等。

其中CEWEY DS18的性价比最高...
小狗T12的吸力也不错...
戴森V8价格较贵...
```

生成结果：
- ✓ 对比表包含：CEWEY DS18、小狗T12、戴森V8
- ✓ 不会包含：小狗T11 Pro、小狗T21 Pure、戴森V10等

**错误示例：**
```
市面上常见的吸尘器品牌有CEWEY、小狗、戴森等。
```

生成结果：
- ✗ 无法匹配任何品牌（因为数据库中没有"CEWEY"、"小狗"、"戴森"这样的简短名称）

### 3. 如果希望简短名称也能匹配

如果你的文章中习惯只写"小狗"、"戴森"这样的简称，有两个解决方案：

**方案A：在数据库中添加简短版本**
```
数据库中同时添加：
- 小狗（代表型号，如最新款或主力型号）
- 小狗T11 Pro
- 小狗T21 Pure
- 小狗T12
```

**方案B：文章中统一使用完整名称（推荐）**
在网格编辑时，使用完整品牌名：
```
第2列：产品介绍
内容：市面上有CEWEY DS18、米家3C、小狗T12等型号...
```

## 匹配规则详解

### 完整匹配逻辑
```python
品牌名 in 文章文本
```

### 示例

| 数据库品牌名 | 文章内容 | 是否匹配 |
|------------|---------|---------|
| CEWEY DS18 | CEWEY DS18性能出色 | ✓ 匹配 |
| CEWEY DS18 | CEWEY性能出色 | ✗ 不匹配 |
| 小狗T12 | 小狗T12很好用 | ✓ 匹配 |
| 小狗T12 | 小狗很好用 | ✗ 不匹配 |
| 小狗T11 Pro | 小狗T11 Pro专业版 | ✓ 匹配 |
| 戴森V8 | 戴森V8吸力强 | ✓ 匹配 |
| 戴森V8 | 戴森吸力强 | ✗ 不匹配 |

## 最佳实践

### 1. 统一命名规范
建议在数据库中使用统一的品牌命名格式：
```
品牌 + 型号
例如：
- 小狗T12
- 小狗T21 Pure
- 戴森V8
- 戴森V10
```

### 2. 文章模板使用变量
如果使用Spintax或变量，可以这样写：
```
{CEWEY DS18|米家3C|小狗T12}这款产品...
```

### 3. 批量替换
如果已有文章只写了简称，可以使用"查找替换"功能：
```
查找：小狗
替换：小狗T12
```

## 技术细节

修改的文件：
1. `ui/main_window.py` - 主窗口品牌识别
2. `core/document_generator.py` - 文档生成器品牌识别

修改内容：
- 移除品牌核心词提取逻辑
- 仅保留完整匹配逻辑
- 删除 `_extract_brand_core` 方法

## 常见问题

### Q: 为什么不匹配部分品牌名？
A: 为了精确控制。如果使用部分匹配，文章中写"小狗"会匹配所有小狗型号，这不是我们想要的。

### Q: 如何一次性对比多个小狗型号？
A: 在文章中明确写出要对比的型号：
```
我们选择了小狗T12、小狗T21 Pure、小狗T11 Pro进行对比...
```

### Q: 我的品牌名很长怎么办？
A: 可以在数据库中使用简短的标识名，只要保持一致即可：
```
数据库：小狗T12
文章：小狗T12
```

---

现在品牌识别更加精确，不会出现误匹配多个型号的情况了！

