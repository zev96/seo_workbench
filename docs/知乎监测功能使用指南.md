# 知乎品牌排名监测功能使用指南

## 📋 功能概述

知乎监测模块是一个全自动的品牌排名追踪系统，可以定时检测指定知乎问题的Top回答中是否包含我方品牌，并分析竞品布局情况。

### 核心功能

✅ **Phase 1 - 基础监控**
- 添加知乎问题监控链接
- 手动/定时自动检测品牌排名
- 实时状态展示（在榜/未发现/失败）
- 品牌词库管理（我方/竞品）

✅ **Phase 2 - 详情分析**
- Top 10回答详细透视表
- 流量数据（浏览量/关注者）
- 智能品牌归属识别
- 竞品布局可视化

✅ **Phase 3 - 自动化**
- 定时任务调度（每日自动检测）
- 历史趋势记录
- Excel报告导出

---

## 🚀 快速开始

### 第一步：配置品牌词库

1. 点击顶部工具栏的 **🏷️ 品牌管理** 按钮
2. 添加 **我方品牌**（如：CEWEY）
   - 品牌名称：精确输入品牌词
   - 类型：选择"我方品牌"
   - 正则表达式（可选）：支持高级匹配，如 `regex:CEWEY|希威`
3. 添加 **竞品品牌**（如：戴森、石头等）
4. 点击"添加品牌"保存

> 💡 提示：品牌词匹配不区分大小写，支持中英文

---

### 第二步：配置Cookie（提高成功率）

1. 点击顶部工具栏的 **⚙️ 设置** 按钮
2. 打开浏览器，登录知乎账号
3. 按 `F12` 打开开发者工具
4. 切换到 **Network** 标签
5. 刷新页面，点击任意请求
6. 在 **Headers** 中找到 `Cookie`，复制完整内容
7. 粘贴到设置对话框的Cookie输入框
8. 调整防封策略：
   - 请求间隔：建议 2-6 秒（模拟人类）
   - 重试次数：建议 3 次
   - 重试间隔：建议 600 秒（10分钟）
9. 点击"保存设置"

---

### 第三步：添加监控任务

1. 点击 **➕ 添加监控** 按钮
2. 填写信息：
   - **问题链接**：复制知乎问题URL
     - 示例：`https://www.zhihu.com/question/123456789`
   - **监测品牌**：选择要监控的我方品牌
   - **检测范围**：设置扫描前N名回答（默认20）
3. 点击"添加"

---

### 第四步：执行检测

#### 方式1：手动检测（立即）
1. 点击 **🔄 立即检测** 按钮
2. 程序将依次扫描所有监控任务
3. 进度条实时显示当前进度
4. 完成后自动更新列表

#### 方式2：定时自动检测
1. 在任务列表中，点击 **⏰** 按钮
2. 勾选"启用定时任务"
3. 设置执行时间（如：10:00）
4. 点击"保存"
5. 程序将每天在指定时间自动执行检测

> ⚠️ 注意：定时任务在后台运行，程序启动时自动激活

---

## 📊 查看详情分析

### 打开详情页
- 点击任务列表中的 **📊 详情** 按钮

### 详情页内容

#### 区域A：流量概览
- **问题标题**：点击可跳转到知乎
- **浏览量**：总浏览次数
- **关注者**：关注该问题的人数
- **我方排名**：当前排名位置
- **最后更新**：数据更新时间

#### 区域B：Top 10 排名透视表

| 列名 | 说明 |
|------|------|
| 排名 | 第1-10名 |
| 提及品牌 | 智能识别（我方/竞品/未提及）|
| 赞同数 | 点赞量 |
| 评论数 | 评论数量 |
| 答主/摘要 | 答主昵称和回答摘要 |

**视觉高亮规则**：
- 🟢 **绿色高亮**：整行表示我方品牌
- **加粗文本**：竞品品牌
- 普通文本：未提及品牌

### 刷新数据
- 点击 **🔄 刷新数据** 按钮
- 程序将重新抓取最新的Top 10数据
- 更新品牌归属和互动数据

---

## 📥 导出报告

### 导出综合报告
1. 点击顶部 **⬇️ 导出报告** 按钮
2. 选择保存位置
3. 自动生成Excel文件，包含：
   - 问题标题和链接
   - 目标品牌
   - 当前状态和排名
   - 浏览量/关注者
   - 定时任务配置
   - 最后更新时间

### Excel报告特性
- ✅ 自动列宽调整
- ✅ 标题行加粗高亮
- ✅ 数据居中对齐
- ✅ 冻结首行
- ✅ 支持超链接

---

## 🔧 高级技巧

### 正则表达式匹配

**场景1：品牌多种写法**
```
品牌名称: CEWEY
正则表达式: regex:(CEWEY|希威|西威|CEWEYrobotics)
```

**场景2：品牌系列产品**
```
品牌名称: 石头
正则表达式: regex:石头\s*[A-Z]\d+
```
匹配：石头 G10、石头 S8 Pro 等

### Cookie失效处理
**现象**：检测失败，提示403错误

**解决方案**：
1. 重新登录知乎
2. 更新Cookie（参考第二步）
3. 增加请求间隔（改为5-10秒）
4. 等待10分钟后重试

### 防封最佳实践
1. ✅ 不要并发检测多个任务
2. ✅ 请求间隔设置 ≥ 3 秒
3. ✅ 定时任务不要设置在高峰期（避开9-11点、14-16点）
4. ✅ 监控任务数量控制在20个以内
5. ✅ 遇到429错误立即停止，等待1小时

---

## 📈 监控历史

### 查看历史趋势
1. 程序自动记录每次检测结果
2. 历史数据存储在数据库中
3. 包含：
   - 检测时间
   - 排名变化
   - 流量变化（浏览量/关注者）

### 历史记录用途
- 分析排名波动趋势
- 评估内容运营效果
- 监控竞品动态
- 生成数据报表

---

## ⚠️ 常见问题

### Q1：为什么检测失败？
**可能原因**：
- Cookie过期或未配置
- 知乎反爬拦截（403/429）
- 网络连接问题
- 问题链接无效

**解决方案**：
1. 检查Cookie配置
2. 增加请求间隔
3. 检查网络连接
4. 验证链接是否有效

---

### Q2：品牌识别不准确？
**可能原因**：
- 品牌词拼写错误
- 回答中使用了别称
- 未配置正则表达式

**解决方案**：
1. 检查品牌词拼写
2. 添加品牌别称到词库
3. 使用正则表达式匹配多种写法

---

### Q3：定时任务没有执行？
**可能原因**：
- 未启用定时任务
- 程序未运行
- 系统时间不准

**解决方案**：
1. 检查任务是否启用（⏰按钮是否绿色）
2. 确保程序在后台运行
3. 校准系统时间

---

### Q4：导出报告为空？
**可能原因**：
- 暂无监控任务
- 未执行过检测
- 文件权限问题

**解决方案**：
1. 先添加监控任务
2. 执行至少一次检测
3. 选择有写入权限的目录

---

## 🎯 使用建议

### 监控策略
1. **高价值问题优先**：选择浏览量 > 10万的问题
2. **关注竞品动态**：添加主要竞品品牌
3. **定期更新Cookie**：建议每周更新一次
4. **合理设置时间**：定时任务建议设在凌晨或早上

### 数据解读
- **排名上升**：内容质量提升，互动增加
- **排名下降**：可能被其他回答超越，需优化内容
- **未上榜**：需要增加回答或提升排名
- **竞品布局密集**：市场竞争激烈，需差异化策略

---

## 📞 技术支持

### 日志查看
- 位置：`logs/seo_workbench_YYYY-MM-DD.log`
- 包含详细的执行日志和错误信息

### 数据库
- 位置：`assets.db`
- 表结构：
  - `zhihu_brands`：品牌词库
  - `zhihu_monitor_tasks`：监控任务
  - `zhihu_monitor_histories`：历史记录
  - `zhihu_monitor_configs`：配置信息

---

## 🔄 版本更新日志

### v2.0（当前版本）
- ✅ Phase 1：基础监控功能
- ✅ Phase 2：详情分析和品牌归属
- ✅ Phase 3：定时任务和导出报告

### 未来规划
- 🔜 排名趋势可视化图表
- 🔜 微信/邮件通知
- 🔜 批量导入监控链接
- 🔜 竞品对比分析报告

---

## 📝 总结

知乎监测模块是一个功能强大的品牌排名追踪工具，通过智能化的自动检测和详细的数据分析，帮助您：

1. ✅ **实时掌握**品牌在知乎的曝光情况
2. ✅ **洞察竞品**布局和市场动态
3. ✅ **优化策略**提升品牌影响力
4. ✅ **节省时间**自动化监控，解放双手

**立即开始使用，让数据驱动您的品牌运营！** 🚀

